<!--components/sentence-detail-modal/sentence-detail-modal.wxml-->
<view class="modal-container" wx:if="{{visible}}">
  
  <!-- é®ç½©å±‚ -->
  <view class="modal-mask" bindtap="onClose"></view>
  
  <!-- å¼¹çª—ä¸»ä½“ -->
  <scroll-view class="modal-content" scroll-y>
    
    <!-- å¤´éƒ¨ -->
    <view class="modal-header">
      <view class="header-left">
        <text class="header-icon">ğŸ’</text>
        <text class="header-title">å¥å­è¯¦æƒ…</text>
      </view>
      <view class="close-btn" bindtap="onClose">
        <text class="close-icon">âœ•</text>
      </view>
    </view>
    
    <!-- åŸå¥ -->
    <view class="section original-section">
      <view class="section-title">
        <text class="title-icon">ğŸ“</text>
        <text class="title-text">åŸå¥</text>
      </view>
      <view class="original-content">
        <text class="english-text">{{sentence.english}}</text>
        <text class="chinese-text">{{sentence.chinese}}</text>
      </view>
    </view>
    
    <!-- å ä½ç¬¦è¯´æ˜ -->
    <view class="section placeholder-section" wx:if="{{sentence.placeholders && sentence.placeholders.length > 0}}">
      <view class="section-title">
        <text class="title-icon">ğŸ”„</text>
        <text class="title-text">æ›¿æ¢è¯´æ˜</text>
      </view>
      <view class="placeholder-list">
        <view 
          wx:for="{{sentence.placeholders}}" 
          wx:key="key"
          class="placeholder-item"
        >
          <view class="ph-key">{{item.key}}</view>
          <view class="ph-desc">{{item.description}}</view>
          <view class="ph-examples">
            <text class="ph-example-label">ç¤ºä¾‹:</text>
            <text 
              wx:for="{{item.examples}}" 
              wx:for-item="example"
              wx:key="*this"
              class="ph-example"
            >
              â€¢ {{example}}
            </text>
          </view>
        </view>
      </view>
    </view>
    
    <!-- 5ä¸ªå˜ä½“ -->
    <view class="section variants-section">
      <view class="section-title">
        <text class="title-icon">ğŸ”€</text>
        <text class="title-text">åŒä¹‰å˜ä½“ ({{sentence.variants ? sentence.variants.length : 0}}ä¸ª)</text>
      </view>
      <view class="variants-list">
        <view 
          wx:for="{{sentence.variants}}" 
          wx:key="id"
          class="variant-card"
        >
          <view class="variant-header">
            <text class="variant-number">å˜ä½“ {{index + 1}}</text>
            <button class="variant-insert-btn" bindtap="onInsertVariant" data-variant="{{item}}">
              æ’å…¥
            </button>
          </view>
          <text class="variant-english">{{item.english}}</text>
          <text class="variant-chinese">{{item.chinese}}</text>
          <view class="variant-diff">
            <text class="diff-label">åŒºåˆ«:</text>
            <text class="diff-text">{{item.difference}}</text>
          </view>
        </view>
      </view>
    </view>
    
    <!-- åº”ç”¨ç¤ºä¾‹ -->
    <view class="section examples-section" wx:if="{{sentence.examples && sentence.examples.length > 0}}">
      <view class="section-title">
        <text class="title-icon">ğŸ“š</text>
        <text class="title-text">åº”ç”¨ç¤ºä¾‹</text>
      </view>
      <view class="examples-list">
        <view 
          wx:for="{{sentence.examples}}" 
          wx:key="topic"
          class="example-card"
        >
          <view class="example-topic">
            <text class="topic-icon">ğŸ·ï¸</text>
            <text class="topic-text">{{item.topic}}</text>
          </view>
          <text class="example-english">{{item.english}}</text>
          <text class="example-chinese">{{item.chinese}}</text>
        </view>
      </view>
    </view>
    
    <!-- è¯­æ³•ç‚¹ -->
    <view class="section grammar-section" wx:if="{{sentence.grammar && sentence.grammar.length > 0}}">
      <view class="section-title">
        <text class="title-icon">ğŸ’¡</text>
        <text class="title-text">è¯­æ³•ç‚¹</text>
      </view>
      <view class="grammar-list">
        <view 
          wx:for="{{sentence.grammar}}" 
          wx:key="name"
          class="grammar-item"
        >
          <view class="grammar-name">{{item.chinese}}</view>
          <view class="grammar-explain">{{item.explanation}}</view>
        </view>
      </view>
    </view>
    
    <!-- æ”¹å†™å»ºè®® -->
    <view class="section rewrite-section" wx:if="{{sentence.rewriteTips && sentence.rewriteTips.length > 0}}">
      <view class="section-title">
        <text class="title-icon">âœï¸</text>
        <text class="title-text">æ”¹å†™å»ºè®®</text>
      </view>
      <view class="rewrite-list">
        <view 
          wx:for="{{sentence.rewriteTips}}" 
          wx:key="*this"
          class="rewrite-item"
        >
          <text class="rewrite-bullet">â€¢</text>
          <text class="rewrite-text">{{item}}</text>
        </view>
      </view>
    </view>
    
    <!-- æ³¨æ„äº‹é¡¹ -->
    <view class="section warnings-section" wx:if="{{sentence.warnings && sentence.warnings.length > 0}}">
      <view class="section-title">
        <text class="title-icon">âš ï¸</text>
        <text class="title-text">æ³¨æ„äº‹é¡¹</text>
      </view>
      <view class="warnings-list">
        <view 
          wx:for="{{sentence.warnings}}" 
          wx:key="*this"
          class="warning-item"
        >
          <text class="warning-text">{{item}}</text>
        </view>
      </view>
    </view>
    
    <!-- åº•éƒ¨æ“ä½œæŒ‰é’® -->
    <view class="modal-footer">
      <button class="footer-btn secondary" bindtap="onFavorite">
        <text class="btn-icon">{{isFavorite ? 'â­' : 'â˜†'}}</text>
        <text class="btn-text">{{isFavorite ? 'å·²æ”¶è—' : 'æ”¶è—'}}</text>
      </button>
      <button class="footer-btn primary" bindtap="onInsertOriginal">
        <text class="btn-text">æ’å…¥åŸå¥</text>
      </button>
    </view>
    
  </scroll-view>
  
</view>


